{"version":3,"sources":["../../../../src/assets/images/app_logo.png.mjs%20%28structured%20image%20object%20with%20data%20url%29","../../../../src/modules/auth/apis/auth.api.ts","../../../../src/shared/utils/handle_errors.util.ts","../../../../src/modules/auth/components/verify_otp.comp.tsx","../../../../src/modules/auth/hooks/verifyOtp.hook.ts"],"sourcesContent":["import src from \"IMAGE\";\nexport default { src, width: 1024, height: 1024, blurWidth: 8, blurHeight: 8, blurDataURL: \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAICAIAAABLbSncAAAApElEQVR42mWNvQqCUACFnXuF9qA36S0ig3qBIAiC9hosCGpwkVtDYYMFF6KoIVoi2oTAcsiCxO5NRUFFUPAf4cDh8HHOIVzbDKSqP13HcSQCQ0gegCm1pPFfyQAAWZIs9bvl3eWYApYJQYdpFhrV4mjFJMBfP22G7V6t0qrP92vHMkJw5q8UNxvDxWTL0gfu9uSjhoakr3R/CY+PKLxFBcvJeV4ewnqhz3/kBc0AAAAASUVORK5CYII=\"};\n","import {\r\n  forgotPasswordAPIRoute,\r\n  loginAPIRoute,\r\n  registerAPIRoute,\r\n  resetPasswordAPIRoute,\r\n  verifyOtpAPIRoute,\r\n} from \"../../../core/redux/apis/api_routes\";\r\nimport rootAPI from \"../../../core/redux/apis/services/api.service\";\r\nimport type { LoginValidationType } from \"../../../shared/utils/validations/auth.validation\";\r\nimport type { ICreateAccountResponse } from \"../types/create_account_response.type\";\r\nimport type { IForgotPasswordRequest } from \"../types/forgot_password_request.type\";\r\nimport type { IForgotPasswordResponse } from \"../types/forgot_password_response.type\";\r\nimport type  IUser  from \"../types/login_response.type\";\r\nimport type { IResetPasswordRequest } from \"../types/reset_password_request.type\";\r\nimport type { IResetPasswordResponse } from \"../types/reset_password_response.type\";\r\nimport type { IVerifyOtpRequest } from \"../types/verify_otp_request\";\r\nimport type { IVerifyOtpResponse } from \"../types/verify_otp_response\";\r\n\r\nconst authAPI = rootAPI.injectEndpoints({\r\n  overrideExisting: false,\r\n\r\n  endpoints: (builder) => ({\r\n    // Login API\r\n    login: builder.mutation<IUser, LoginValidationType>({\r\n      query: (loginData) => ({\r\n        url: loginAPIRoute,\r\n        method: \"POST\",\r\n        body: loginData,\r\n      }),\r\n      invalidatesTags: [\"User\"],\r\n      transformResponse: (response: { data: IUser }) => {\r\n        return response.data;\r\n      },\r\n    }),\r\n\r\n    // Create account API\r\n    createAccount: builder.mutation<\r\n      ICreateAccountResponse,\r\n      LoginValidationType\r\n    >({\r\n      query: (CreateAccountData) => ({\r\n        url: registerAPIRoute,\r\n        method: \"POST\",\r\n        body: CreateAccountData,\r\n      }),\r\n      invalidatesTags: [\"User\"],\r\n      transformResponse: (response: { data: ICreateAccountResponse }) => {\r\n        return response.data;\r\n      },\r\n    }),\r\n\r\n    // Forgot password API\r\n    forgotPassword: builder.mutation<\r\n      IForgotPasswordResponse,\r\n      IForgotPasswordRequest\r\n    >({\r\n      query: (forgotPasswordData) => ({\r\n        url: forgotPasswordAPIRoute,\r\n        method: \"POST\",\r\n        body: forgotPasswordData,\r\n      }),\r\n      invalidatesTags: [\"User\"],\r\n      transformResponse: (response: { data: IForgotPasswordResponse }) => {\r\n        return response.data;\r\n      },\r\n    }),\r\n\r\n    // Verify OTP API\r\n    verifyOtp: builder.mutation<IVerifyOtpResponse, IVerifyOtpRequest>({\r\n      query: (verifyOtpData) => ({\r\n        url: verifyOtpAPIRoute,\r\n        method: \"POST\",\r\n        body: verifyOtpData,\r\n      }),\r\n      invalidatesTags: [\"User\"],\r\n      transformResponse: (response: { data: IVerifyOtpResponse }) => {\r\n        return response.data;\r\n      },\r\n    }),\r\n\r\n    // Reset password API\r\n    resetPassword: builder.mutation<\r\n      IResetPasswordResponse,\r\n      IResetPasswordRequest\r\n    >({\r\n      query: (resetPasswordData) => ({\r\n        url: resetPasswordAPIRoute,\r\n        method: \"POST\",\r\n        body: resetPasswordData,\r\n      }),\r\n      invalidatesTags: [\"User\"],\r\n      transformResponse: (response: { data: IResetPasswordResponse }) => {\r\n        return response.data;\r\n      },\r\n    }),\r\n  }),\r\n});\r\n\r\nexport const {\r\n  useLoginMutation,\r\n  useCreateAccountMutation,\r\n  useResetPasswordMutation,\r\n  useVerifyOtpMutation,\r\n  useForgotPasswordMutation,\r\n} = authAPI;\r\n\r\nexport default authAPI;\r\n","/* eslint-disable @typescript-eslint/no-explicit-any */\r\nimport { toast } from \"sonner\";\r\n\r\nconst handleErrors = (error: unknown) => {\r\n\r\n    let errorMessage = \"An error occurred\";\r\n\r\n    if (typeof error === \"object\" && error !== null) {\r\n        // RTK Query errors often come with `data`\r\n        if (\"data\" in error) {\r\n            errorMessage = (error as any).data.message || errorMessage;\r\n            console.error(\"ERROR DATA::: \", (error as any).data);\r\n        } \r\n        // Generic JS error\r\n        else if (\"message\" in error) {\r\n            errorMessage = (error as any).message || errorMessage;\r\n            console.error(\"ERROR MESSAGE::: \", (error as any).message);\r\n        } \r\n        else {\r\n            errorMessage = error.toString();\r\n            console.error(\"ERROR OBJECT::: \", error);\r\n        }\r\n    } else {\r\n        errorMessage = errorMessage;\r\n        console.error(\"ERROR::: \", error);\r\n    }\r\n\r\n    // Display error message to user\r\n    toast.error(errorMessage.charAt(0).toUpperCase() + errorMessage.slice(1));\r\n};\r\n\r\nexport default handleErrors;\r\n","'use client';\n\nimport LogoImage from \"@/assets/images/app_logo.png\";\nimport useVerifyOtpHook from \"../hooks/verifyOtp.hook\";\nimport { forgotPasswordRoute, resetPasswordRoute } from \"../../../core/routes/routeNames\";\nimport { useRouter } from \"next/navigation\";\n\nconst VerifyOtpComp = () => {\n  const router = useRouter();\n\n  const { otp, setOtp, handleSubmitVerifyOtpForm, isLoading } =\n    useVerifyOtpHook();\n\n  const scrollToTopSmooth = () => {\n    if (typeof window !== \"undefined\") {\n      window.scrollTo({ top: 0, behavior: \"smooth\" });\n    }\n  };\n\n  const handleChange = (value: string, index: number) => {\n    if (!/^[0-9]?$/.test(value)) return;\n\n    const newOtp = [...otp];\n    newOtp[index] = value;\n    setOtp(newOtp);\n\n    // If user types a number → go to next box\n    if (value && index < 5) {\n      const next = document.getElementById(`otp-${index + 1}`);\n      next?.focus();\n    }\n\n    // If user clears input → go back\n    if (!value && index > 0) {\n      const prev = document.getElementById(`otp-${index - 1}`);\n      prev?.focus();\n    }\n  };\n\n  return (\n    <div className=\"w-full overflow-hidden max-w-xl\">\n      <div className=\"p-5 md:p-12 flex flex-col justify-center\">\n        <div className=\"mb-8 flex justify-center\">\n          <div className=\"flex items-center gap-2\">\n            <img src={LogoImage.src} alt=\"logo\" className=\"w-22 h-22\" />\n          </div>\n        </div>\n\n        <div className=\"text-center mb-8\">\n          <p className=\"text-primary-color font-medium text-lg mb-2\">\n            Alright! You can proceed to\n          </p>\n          <h2 className=\"text-3xl xl:text-4xl font-black text-primary-color\">\n            Verify OTP sent\n          </h2>\n          <p className=\"text-primary-color text-[15px] mt-2\">\n            Enter the 6-digit code that was sent to your email at\n            myemail@gmail.com\n          </p>\n        </div>\n\n        {/* === OTP INPUTS === */}\n        <div className=\"flex justify-between mb-8\">\n          {otp.map((digit, index) => (\n            <input\n              key={index}\n              id={`otp-${index}`}\n              value={digit}\n              onChange={(e) => handleChange(e.target.value, index)}\n              maxLength={1}\n              placeholder=\"-\"\n              className={`\n                md:w-16 md:h-16 w-12 h-12 border rounded-2xl\n                text-center text-xl font-bold\n                focus:outline-none focus:border-primary-color\n                ${digit\n                  ? \"border-[#003625] text-[#003625]\"\n                  : \"border-gray-300 bg-white text-primary-color\"\n                }\n            `}\n            />\n          ))}\n        </div>\n\n        <div className=\"flex gap-5\">\n          <button\n            onClick={() => {\n              scrollToTopSmooth();\n              router.push(forgotPasswordRoute);\n            }}\n            disabled={isLoading}\n            type=\"button\"\n            className=\"w-full p-0.5 border backdrop-blur-[10px] border-[#003625] rounded-[18px] transition cursor-pointer disabled:opacity-50 disabled:cursor-not-allowed\"\n          >\n            <div className=\"w-full bg-secondary-color text-secondary-color py-4 rounded-[14px] font-semibold\">\n              {\"Back\"}\n            </div>\n          </button>\n\n          <button\n            // onClick={handleSubmitVerifyOtpForm}\n            onClick={() => {\n              scrollToTopSmooth();\n              router.push(resetPasswordRoute);\n            }}\n            disabled={isLoading}\n            type=\"button\"\n            className=\"w-full p-0.5 border backdrop-blur-[10px] border-[#003625] rounded-[18px] transition cursor-pointer disabled:opacity-50 disabled:cursor-not-allowed\"\n          >\n            <div className=\"w-full bg-primary-color text-white py-4 rounded-[14px] font-semibold\">\n              {isLoading ? \"Please wait...\" : \"Verify OTP\"}\n            </div>\n          </button>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default VerifyOtpComp;\n","import { useRouter } from \"next/navigation\";\nimport { useState } from \"react\";\nimport { useVerifyOtpMutation } from \"../apis/auth.api\";\nimport secureLocalStorage from \"react-secure-storage\";\nimport { resetPasswordRoute } from \"../../../core/routes/routeNames\";\nimport handleErrors from \"../../../shared/utils/handle_errors.util\";\nimport { toast } from \"sonner\";\n\n\nconst useVerifyOtpHook = () => {\n  const router = useRouter();\n  const email = secureLocalStorage.getItem(\"email\") as string;\n\n  // OTP is 6 separate inputs\n  const [otp, setOtp] = useState([\"\", \"\", \"\", \"\", \"\", \"\"]);\n\n  const [verifyOtp, { isLoading }] = useVerifyOtpMutation();\n\n  const scrollToTopSmooth = () => {\n    if (typeof window !== \"undefined\") {\n      window.scrollTo({ top: 0, behavior: \"smooth\" });\n    }\n  };\n\n  const handleSubmitVerifyOtpForm = async () => {\n\n    if (otp.join(\"\").length !== 6) {\n      return;\n    }\n\n    //==== Construct request body here ====//\n    const requestBody = {\n      email,\n      otp: otp.join(\"\"),\n    };\n\n    try {\n      const response = await verifyOtp(requestBody).unwrap();\n\n      console.log(\"VERIFY OTP RESPONSE::: \", response);\n\n      if (response?.message) {\n        secureLocalStorage.removeItem(\"email\");\n\n        toast.success(\"OTP verified successfully\");\n        scrollToTopSmooth();\n        router.push(resetPasswordRoute);\n      } else {\n        toast.error(response?.message);\n      }\n    } catch (error) {\n      handleErrors(error);\n    }\n  };\n\n  return {\n    otp,\n    setOtp,\n    handleSubmitVerifyOtpForm,\n    isLoading,\n  };\n};\n\nexport default useVerifyOtpHook;"],"names":[],"mappings":"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"}