{"version":3,"sources":["../../../../src/assets/images/app_logo.png.mjs%20%28structured%20image%20object%20with%20data%20url%29","../../../../src/modules/auth/components/forgot_password.comp.tsx","../../../../src/modules/auth/hooks/forgotPassword.hook.ts"],"sourcesContent":["import src from \"IMAGE\";\nexport default { src, width: 1024, height: 1024, blurWidth: 8, blurHeight: 8, blurDataURL: \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAICAIAAABLbSncAAAApElEQVR42mWNvQqCUACFnXuF9qA36S0ig3qBIAiC9hosCGpwkVtDYYMFF6KoIVoi2oTAcsiCxO5NRUFFUPAf4cDh8HHOIVzbDKSqP13HcSQCQ0gegCm1pPFfyQAAWZIs9bvl3eWYApYJQYdpFhrV4mjFJMBfP22G7V6t0qrP92vHMkJw5q8UNxvDxWTL0gfu9uSjhoakr3R/CY+PKLxFBcvJeV4ewnqhz3/kBc0AAAAASUVORK5CYII=\"};\n","'use client';\n\nimport LogoImage from \"@/assets/images/app_logo.png\";\nimport useForgotPasswordHook from \"../hooks/forgotPassword.hook\";\nimport { loginRoute } from \"../../../core/routes/routeNames\";\nimport { useRouter } from \"next/navigation\";\n\nconst ForgotPasswordComp = () => {\n  const router = useRouter();\n\n  //=== Call required hooks here ===//\n  const { email, setEmail, handleSubmitForgotPasswordForm, isLoading } =\n    useForgotPasswordHook();\n\n  const scrollToTopSmooth = () => {\n    if (typeof window !== \"undefined\") {\n      window.scrollTo({ top: 0, behavior: \"smooth\" });\n    }\n  };\n\n  return (\n    <div className=\"w-full overflow-hidden max-w-xl\">\n      <div className=\"p-5 md:p-12 flex flex-col justify-center\">\n        <div className=\"mb-8 flex justify-center\">\n          <div className=\"flex items-center gap-2\">\n            <img src={LogoImage.src} alt=\"logo\" className=\"w-22 h-22\" />\n          </div>\n        </div>\n\n        <div className=\"text-center mb-8\">\n          <p className=\"text-primary-color font-medium text-lg mb-2\">\n            Hey! We learnt that you\n          </p>\n          <h2 className=\"text-3xl xl:text-4xl font-black text-primary-color\">\n            Forgot your password\n          </h2>\n          <p className=\"text-primary-color text-[15px] mt-2\">\n            Enter the email address for this account and we will send you a code\n            to reset your password\n          </p>\n        </div>\n\n        <div className=\"space-y-5\">\n          <div>\n            <label className=\"block text-sm font-medium text-gray-700 mb-2 pl-3\">\n              Email\n            </label>\n            <input\n              type=\"email\"\n              value={email}\n              required\n              onChange={(e) => setEmail(e.target.value)}\n              placeholder=\"Enter your email address\"\n              className=\"w-full px-4 py-3 border border-gray-300 rounded-2xl outline-none transition\"\n            />\n          </div>\n\n          <div className=\"flex gap-5\">\n            <button\n            onClick={() => {\n              scrollToTopSmooth();\n              router.push(loginRoute);\n            }}\n              disabled={isLoading}\n              type=\"button\"\n              className=\"w-full p-0.5 border backdrop-blur-[10px] border-[#003625] rounded-[18px] transition cursor-pointer disabled:opacity-50 disabled:cursor-not-allowed\"\n            >\n              <div className=\"w-full bg-secondary-color text-secondary-color py-4 rounded-[14px] font-semibold\">\n                {'Back To Login'}\n              </div>\n            </button>\n\n            <button\n              onClick={handleSubmitForgotPasswordForm}\n            // onClick={() => {\n            //   scrollToTopSmooth();\n            //   router.push(verifyOtpRoute);\n            // }}\n              disabled={isLoading}\n              type=\"button\"\n              className=\"w-full p-0.5 border backdrop-blur-[10px] border-[#003625] rounded-[18px] transition cursor-pointer disabled:opacity-50 disabled:cursor-not-allowed\"\n            >\n              <div className=\"w-full bg-primary-color text-white py-4 rounded-[14px] font-semibold\">\n                {isLoading ? \"Please wait...\" : \"Proceed To Get Code\"}\n              </div>\n            </button>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default ForgotPasswordComp;\n","// import { useRouter } from \"next/navigation\";\n// import { useState } from \"react\";\n// import { useForgotPasswordMutation } from \"../apis/auth.api\";\n// import secureLocalStorage from \"react-secure-storage\";\n// import { verifyOtpRoute } from \"../../../core/routes/routeNames\";\n// import handleErrors from \"../../../shared/utils/handle_errors.util\";\n// import { toast } from \"sonner\";\n\n// const useForgotPasswordHook = () => {\n//   const router = useRouter();\n\n//   //==== State variables here ====//\n//   const [email, setEmail] = useState(\"\");\n\n\n//   //==== Call you APIs here ====//\n//   const [forgotPassword, { isLoading }] = useForgotPasswordMutation();\n\n//   const scrollToTopSmooth = () => {\n//     if (typeof window !== \"undefined\") {\n//       window.scrollTo({ top: 0, behavior: \"smooth\" });\n//     }\n//   };\n\n//   // Handle submit login form\n//   const handleSubmitForgotPasswordForm = async () => {\n\n//     //==== Construct request body here ====//\n//     const requestBody = {\n//       email: email,\n//     };\n\n//     try {\n\n//       //==== Call the APIs here ====//\n//       const forgotPasswordResponse = await forgotPassword(\n//         requestBody\n//       ).unwrap();\n//       const message = forgotPasswordResponse.message;\n\n//       console.log(\"FORGOT PASSWORD RESPONSE::: \", forgotPasswordResponse);\n\n//       if (message) {\n//         //==== Save the email in local storage ====//\n//         secureLocalStorage.setItem(\"email\", email);\n\n//         toast.success(\"Password reset link sent to your email\");\n//         scrollToTopSmooth();\n//         router.push(verifyOtpRoute);\n//       } else {\n//         toast.error(forgotPasswordResponse.message);\n//       }\n//     } catch (error) {\n//       handleErrors(error);\n//     }\n//   };\n\n//   return {\n//     email,\n//     setEmail,\n//     handleSubmitForgotPasswordForm,\n//     isLoading,\n//   };\n// };\n\n// export default useForgotPasswordHook;\n\n\n\n\n\n/* eslint-disable @typescript-eslint/no-explicit-any */\nimport { useState } from \"react\";\nimport { useRouter } from \"next/navigation\";\nimport { sendPasswordResetEmail } from \"firebase/auth\";\nimport { auth } from \"@/lib/firebase\";\nimport { toast } from \"sonner\";\nimport secureLocalStorage from \"react-secure-storage\";\nimport { verifyOtpRoute } from \"../../../core/routes/routeNames\";\nimport getFirebaseErrorMessage from \"@/shared/utils/firebase_errors.util\";\n\nconst useForgotPasswordHook = () => {\n  const router = useRouter();\n\n  // ===== State =====\n  const [email, setEmail] = useState(\"\");\n  const [errors, setErrors] = useState<{ email?: string }>({});\n  const [isLoading, setIsLoading] = useState(false);\n\n  const scrollToTopSmooth = () => {\n    if (typeof window !== \"undefined\") {\n      window.scrollTo({ top: 0, behavior: \"smooth\" });\n    }\n  };\n\n  // ===== Submit handler =====\n  const handleSubmitForgotPasswordForm = async () => {\n    setIsLoading(true);\n    setErrors({});\n\n    try {\n      if (!email) {\n        setErrors({ email: \"Email is required\" });\n        return;\n      }\n\n      // ===== Firebase password reset =====\n      await sendPasswordResetEmail(auth, email);\n\n      // Save email locally for possible OTP flow\n      secureLocalStorage.setItem(\"email\", email);\n\n      toast.success(\"Password reset link sent to your email!\");\n      scrollToTopSmooth();\n      router.push(verifyOtpRoute);\n    } catch (error: any) {\n      console.error(error);\n\n      if (error.code) {\n         const friendlyMessage = getFirebaseErrorMessage(error.code);\n         \n        if (error.code === \"auth/user-not-found\" || error.code === \"auth/invalid-email\") {\n          setErrors({ email: friendlyMessage });\n        } else {\n          toast.error(friendlyMessage);\n        }\n      } else {\n        toast.error(\"Something went wrong, please try again\");\n      }\n    } finally {\n      setIsLoading(false);\n    }\n  };\n\n  return {\n    email,\n    setEmail,\n    errors,\n    isLoading,\n    handleSubmitForgotPasswordForm,\n  };\n};\n\nexport default useForgotPasswordHook;\n"],"names":[],"mappings":"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"}